<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bauhaus Grid</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    canvas {
      display: block;
      width: 100vw;
      background: #f0f0f0;
    }

    #downloadBtn, #refreshBtn, #randomPaletteBtn, #christmasBtn {
      max-width: 200px;
      box-shadow: 1px 1px 1px #0000003b;
      opacity: 1;
      color: #333;
      font-weight: 400;
      text-transform: uppercase;
      font-size: 13px;
      font-family: 'open sans';
      display: inline-flex;
      align-items: center;
    }

    #downloadBtn:hover, #refreshBtn:hover, #randomPaletteBtn:hover, #christmasBtn:hover {
      opacity: 1;
    }

    .buttons {
      position: absolute;
      left: 2%;
      bottom: 0px;
      height: 60px;
    }

    button {
      background-color: #fff;
      display: inline-block;
      padding: 8px 20px 8px 16px;
      margin-right: 5px;
      cursor: pointer;
      border:1px solid aliceblue;
    }
    #downloadBtn:hover, #refreshBtn:hover, #randomPaletteBtn:hover, #christmasBtn:hover{
     background-color: aliceblue;
    }

    .fa {
      margin-right: 8px;
    }
  </style>
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <div class="buttons">
    <button id="downloadBtn"><i class="fa fa-download"></i>Download</button>
    <button onclick="refreshPage()" id="refreshBtn"><i class="fa fa-sync-alt"></i>AZ Blue</button>
    <button onclick="christmasMode()" id="christmasBtn"><i class="fa fa-tree"></i>AZ Blue Christmas</button>
    <button onclick="randomPalette()" id="randomPaletteBtn"><i class="fa fa-palette"></i>Random</button>
  </div>
  <canvas id="gridCanvas" width="1440" height="960"></canvas>

  <script>
    const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');

    let minCellsAcross = 8;
    let isChristmasMode = true; // Start in Christmas mode by default
    let selectedSvgDesign = 3; // Always use design 3 (snowflakes with varied sizes)
    // Commented out random selection - uncomment to enable multiple SVG designs:
    // let selectedSvgDesign = Math.floor(Math.random() * 4);

    // Christmas color palette for SVG
    const christmasColors = ['#FBB24C', '#E7EAF1', '#F58220', '#0099D8', '#FFFFFF', '#F1F9FD'];

    const colorPalettes = [
      ['#F58220', '#FBB24C', '#0099D8', '#FFFFFF', '#E7EAF1'], // AZ Blue
      ['#F1AA00', '#F525BC', '#ED2992', '#C11DB3', '#45A5F2', '#94EAA4', '#ffffff'], // Pow!
      ['#FEC028', '#EE5A31', '#1F2A39', '#F8A4BC', '#7B9AAB', '#A89E32', '#0B806B', '#ffffff'], // Tropics
      ['#444343', '#2d2c2c', '#312f2f', '#3b3a3a', '#1a1a1a'], //Carbon
      ['#ccc5b9', '#252422', '#403d39', '#eb5e28', '#fffcf2'], //Terracotta
      ['#026173', '#fa8a57', '#dda850', '#e9bg9c', '#db5659', '#b5d5ca'], //Terra
      ['#D23031', '#F54337', '#B71B1C', '#FF9C00', '#FF6100'], // Ember
      ['#9E50BE', '#D680D9', '#300EA1', '#6D28C3', '#F2C2F4'], // Orchid
      ['#4E8098', '#A2C3DB', '#E7D4C9', '#FB9F89', '#EF6F6C'], // Dream
      ['#0F4C81', '#2A7B9B', '#F18F01', '#F06000', '#D9C8B4'], // Punch
      ['#88CCF1', '#F76C5E', '#F9A620', '#2A2E32', '#E4E4E4'], //Tucan
      ['#1A535C', '#4ECDC4', '#FF6B6B', '#FFE66D', '#F7FFF7'], // Exotica
      ['#03060D', '#011C26', '#014040', '#185941', '#F2F2F2'], // Swampthing
      ['#001542', '#085454', '#7A7A7A', '#FFFFFF', '#FFB30D'], // Swampthing
      ['#0597F2', '#05AFF2', '#05C7F2', '#F2D479', '#D96523'], // Swampthing
      ['#025159', '#038C5A', '#04D976', '#03A65A', '#04D960'], // Swampthing
      ['#593C23', '#BFAE9F', '#A65C41', '#401B13', '#8C2920'], // Swampthing
      ['#3D5A73', '#2F3D40', '#455559', '#28403D', '#182625'], // Swampthing
      ['#8A74B2', '#BB738A', '#E87264', '#F98162', '#FFAE82'], // Swampthing
    ];

    let colors = colorPalettes[0]; // Start with AZ Blue palette (Christmas mode)

    function setCanvasSize() {
      canvas.width = window.innerWidth;
      const cellSize = canvas.width / minCellsAcross;
      const rows = Math.ceil(window.innerHeight / cellSize);
      canvas.height = rows * cellSize;
    }

    function calculateGrid() {
      const cellSize = canvas.width / minCellsAcross;
      const cols = Math.floor(canvas.width / cellSize);
      const rows = Math.floor(canvas.height / cellSize);
      return { cellSize, rows, cols };
    }

    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const { cellSize, rows, cols } = calculateGrid();

      for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
          ctx.fillStyle = 'transparent';
          ctx.strokeStyle = 'transparent';

          const bgColor = colors[Math.floor(Math.random() * colors.length)];
          ctx.fillStyle = getFillStyle(bgColor, col * cellSize, row * cellSize, cellSize);
          ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);

          const shapeColors = colors.filter(c => c !== bgColor);
          const shapeColor = shapeColors[Math.floor(Math.random() * shapeColors.length)];

          if (isChristmasMode) {
            drawSvgShape(ctx, col * cellSize, row * cellSize, cellSize, bgColor);
          } else {
            drawQuarterCircle(ctx, col * cellSize, row * cellSize, cellSize, shapeColor);
          }
        }
      }
    }

    function getFillStyle(color, x, y, size) {
      return color;
    }

    function drawQuarterCircle(context, x, y, size, color) {
      context.fillStyle = color;
      const corners = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];
      const corner = corners[Math.floor(Math.random() * corners.length)];

      context.beginPath();
      switch (corner) {
        case 'top-left':
          context.moveTo(x, y);
          context.arc(x, y, size, 0, Math.PI / 2);
          break;
        case 'top-right':
          context.moveTo(x + size, y);
          context.arc(x + size, y, size, Math.PI / 2, Math.PI);
          break;
        case 'bottom-left':
          context.moveTo(x, y + size);
          context.arc(x, y + size, size, 1.5 * Math.PI, 0);
          break;
        case 'bottom-right':
          context.moveTo(x + size, y + size);
          context.arc(x + size, y + size, size, Math.PI, 1.5 * Math.PI);
          break;
      }
      context.closePath();
      context.fill();
    }

    function getRandomColors() {
      // Shuffle the colors array and pick first 3
      const availableColors = [...christmasColors];
      const shuffled = availableColors.sort(() => Math.random() - 0.5);
      return {
        cls2: shuffled[0],
        cls3: shuffled[1],
        cls4: shuffled[2]
      };
    }

    function drawSvgShape(context, x, y, size, bgColor) {
      // Get three random colors different from background and from each other
      const colorSet = getRandomColors();
      // Random rotation: 0, 90, 180, or 270 degrees
      const rotations = [0, 90, 180, 270];
      const rotation = rotations[Math.floor(Math.random() * rotations.length)];
      
      // Snowflakes with varied sizes design
      // Three light background options
      const bgOptions = ['#FFFFFF', '#E7EAF1', '#F1F9FD'];
      
      // Filter out the quarter circle color if it matches any background option
      const availableBgs = bgOptions.filter(bg => bg !== colorSet.cls2);
      
      // If quarter circle isn't a light color, use all options; otherwise use filtered list
      const lightBg = availableBgs.length === bgOptions.length 
        ? bgOptions[Math.floor(Math.random() * bgOptions.length)]
        : availableBgs[Math.floor(Math.random() * availableBgs.length)];
      
      const svgString = `<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="82.66 1.24 80 80">
  <defs>
    <style>.cls-1,.cls-2{fill:none;}.cls-3{fill:${colorSet.cls2};}.cls-4{fill:${colorSet.cls3};}.cls-2{stroke:${colorSet.cls4};stroke-linecap:round;stroke-linejoin:round;stroke-width:.5px;}.cls-5{fill:${colorSet.cls4};}.cls-7{clip-path:url(#clippath);}.cls-8{fill:${colorSet.cls2};}</style>
    <clipPath id="clippath"><rect class="cls-1" x="82.66" y="1.24" width="80" height="80"/></clipPath>
  </defs>
  <g class="cls-7" transform="rotate(${rotation} 122.66 41.24)">
    <rect fill="${lightBg}" x="82.66" y="1.24" width="80" height="80"/>
    <path class="cls-3" d="M82.66,1.24h0v80h80C162.66,37.05,126.85,1.24,82.66,1.24Z"/>
    <path class="cls-5" d="M97.79,44.52h-4.62l3.27-3.27c.13-.13.13-.35,0-.48-.13-.13-.35-.13-.48,0l-3.27,3.27v-4.62c0-.19-.15-.34-.34-.34s-.34.15-.34.34v4.62l-3.27-3.27c-.13-.13-.35-.13-.48,0-.13.13-.13.35,0,.48l3.27,3.27h-4.62c-.19,0-.34.15-.34.34s.15.34.34.34h4.62l-3.27,3.27c-.13.13-.13.35,0,.48.07.07.15.1.24.1s.17-.03.24-.1l3.27-3.27v4.62c0,.19.15.34.34.34s.34-.15.34-.34v-4.62l3.27,3.27c.07.07.15.1.24.1s.17-.03.24-.1c.13-.13.13-.35,0-.48l-3.27-3.27h4.62c.19,0,.34-.15.34-.34s-.15-.34-.34-.34Z"/>
    <path class="cls-4" d="M55.67,37.01h-12.62l8.92-8.92c.36-.36.36-.94,0-1.31s-.94-.36-1.31,0l-8.92,8.92v-12.62c0-.51-.41-.92-.92-.92s-.92.41-.92.92v12.62l-8.92-8.92c-.36-.36-.94-.36-1.31,0s-.36.94,0,1.31l8.92,8.92h-12.62c-.51,0-.92.41-.92.92s.41.92.92.92h12.62l-8.92,8.92c-.36.36-.36.94,0,1.31.18.18.42.27.65.27s.47-.09.65-.27l8.92-8.92v12.62c0,.51.41.92.92.92s.92-.41.92-.92v-12.62l8.92,8.92c.18.18.42.27.65.27s.47-.09.65-.27c.36-.36.36-.94,0-1.31l-8.92-8.92h12.62c.51,0,.92-.41.92-.92s-.41-.92-.92-.92Z"/>
    <path class="cls-8" d="M36.85,80.19h-12.62l8.92-8.92c.36-.36.36-.94,0-1.31-.36-.36-.94-.36-1.31,0l-8.92,8.92v-12.62c0-.51-.41-.92-.92-.92s-.92.41-.92.92v12.62l-8.92-8.92c-.36-.36-.94-.36-1.31,0-.36.36-.36.94,0,1.31l8.92,8.92H7.16c-.51,0-.92.41-.92.92s.41.92.92.92h12.62l-8.92,8.92c-.36.36-.36.94,0,1.31.18.18.42.27.65.27s.47-.09.65-.27l8.92-8.92v12.62c0,.51.41.92.92.92s.92-.41.92-.92v-12.62l8.92,8.92c.18.18.42.27.65.27s.47-.09.65-.27c.36-.36.36-.94,0-1.31l-8.92-8.92h12.62c.51,0,.92-.41.92-.92s-.41-.92-.92-.92Z"/>
    <path class="cls-8" d="M97.8,134.09h-12.62l8.92-8.92c.36-.36.36-.94,0-1.31s-.94-.36-1.31,0l-8.92,8.92v-12.62c0-.51-.41-.92-.92-.92s-.92.41-.92.92v12.62l-8.92-8.92c-.36-.36-.94-.36-1.31,0s-.36.94,0,1.31l8.92,8.92h-12.62c-.51,0-.92.41-.92.92s.41.92.92.92h12.62l-8.92,8.92c-.36.36-.36.94,0,1.31.18.18.42.27.65.27s.47-.09.65-.27l8.92-8.92v12.62c0,.51.41.92.92.92s.92-.41.92-.92v-12.62l8.92,8.92c.18.18.42.27.65.27s.47-.09.65-.27c.36-.36.36-.94,0-1.31l-8.92-8.92h12.62c.51,0,.92-.41.92-.92s-.41-.92-.92-.92Z"/>
    <path class="cls-4" d="M54.72,118.32h-12.62l8.92-8.92c.36-.36.36-.94,0-1.31s-.94-.36-1.31,0l-8.92,8.92v-12.62c0-.51-.41-.92-.92-.92s-.92.41-.92.92v12.62l-8.92-8.92c-.36-.36-.94-.36-1.31,0s-.36.94,0,1.31l8.92,8.92h-12.62c-.51,0-.92.41-.92.92s.41.92.92.92h12.62l-8.92,8.92c-.36.36-.36.94,0,1.31.18.18.42.27.65.27s.47-.09.65-.27l8.92-8.92v12.62c0,.51.41.92.92.92s.92-.41.92-.92v-12.62l8.92,8.92c.18.18.42.27.65.27s.47-.09.65-.27c.36-.36.36-.94,0-1.31l-8.92-8.92h12.62c.51,0,.92-.41.92-.92s-.41-.92-.92-.92Z"/>
    <path class="cls-4" d="M142.04,122.36h-12.62l8.92-8.92c.36-.36.36-.94,0-1.31s-.94-.36-1.31,0l-8.92,8.92v-12.62c0-.51-.41-.92-.92-.92s-.92.41-.92.92v12.62l-8.92-8.92c-.36-.36-.94-.36-1.31,0s-.36.94,0,1.31l8.92,8.92h-12.62c-.51,0-.92.41-.92.92s.41.92.92.92h12.62l-8.92,8.92c-.36.36-.36.94,0,1.31.18.18.42.27.65.27s.47-.09.65-.27l8.92-8.92v12.62c0,.51.41.92.92.92s.92-.41.92-.92v-12.62l8.92,8.92c.18.18.42.27.65.27s.47-.09.65-.27c.36-.36.36-.94,0-1.31l-8.92-8.92h12.62c.51,0,.92-.41.92-.92s-.41-.92-.92-.92Z"/>
    <circle class="cls-4" cx="62.53" cy="57.53" r="4.27"/>
    <circle class="cls-4" cx="98.72" cy="68.14" r="7.88"/>
    <circle class="cls-4" cx="110.43" cy="15.72" r="4.19"/>
    <circle class="cls-4" cx="99.01" cy="108.66" r="4.16"/>
    <circle class="cls-8" cx="106.21" cy="147.27" r="4.71"/>
    <circle class="cls-4" cx="150.11" cy="104.5" r="4.25"/>
    <circle class="cls-5" cx="150.11" cy="52.39" r="4.71"/>
    <circle class="cls-8" cx="58.25" cy="13.24" r="4.71"/>
    <circle class="cls-4" cx="17.69" cy="54.09" r="4.32"/>
    <circle class="cls-8" cx="56.6" cy="91.54" r="4.71"/>
    <circle class="cls-4" cx="54.08" cy="144.92" r="4.17"/>
    <circle class="cls-4" cx="94" cy="24.58" r="2.82"/>
    <line class="cls-2" x1="123.57" y1="24.29" x2="123.57" y2="60.38"/>
    <line class="cls-2" x1="123.57" y1="38.48" x2="126.94" y2="35.01"/>
    <line class="cls-2" x1="120.21" y1="35.01" x2="123.57" y2="38.48"/>
    <line class="cls-2" x1="123.57" y1="34.17" x2="126.94" y2="30.7"/>
    <line class="cls-2" x1="120.21" y1="30.7" x2="123.57" y2="34.17"/>
    <line class="cls-2" x1="123.57" y1="29.86" x2="126.94" y2="26.39"/>
    <line class="cls-2" x1="120.21" y1="26.39" x2="123.57" y2="29.86"/>
    <line class="cls-2" x1="123.57" y1="46.19" x2="120.21" y2="49.66"/>
    <line class="cls-2" x1="126.94" y1="49.66" x2="123.57" y2="46.19"/>
    <line class="cls-2" x1="123.57" y1="50.5" x2="120.21" y2="53.97"/>
    <line class="cls-2" x1="126.94" y1="53.97" x2="123.57" y2="50.5"/>
    <line class="cls-2" x1="123.57" y1="54.8" x2="120.21" y2="58.28"/>
    <line class="cls-2" x1="126.94" y1="58.28" x2="123.57" y2="54.8"/>
    <line class="cls-2" x1="107.94" y1="33.31" x2="139.2" y2="51.36"/>
    <line class="cls-2" x1="120.23" y1="40.41" x2="118.91" y2="35.76"/>
    <line class="cls-2" x1="115.54" y1="41.59" x2="120.23" y2="40.41"/>
    <line class="cls-2" x1="116.5" y1="38.25" x2="115.18" y2="33.6"/>
    <line class="cls-2" x1="111.81" y1="39.43" x2="116.5" y2="38.25"/>
    <line class="cls-2" x1="112.77" y1="36.1" x2="111.45" y2="31.45"/>
    <line class="cls-2" x1="108.08" y1="37.28" x2="112.77" y2="36.1"/>
    <line class="cls-2" x1="126.91" y1="44.26" x2="128.23" y2="48.91"/>
    <line class="cls-2" x1="131.6" y1="43.08" x2="126.91" y2="44.26"/>
    <line class="cls-2" x1="130.64" y1="46.42" x2="131.96" y2="51.07"/>
    <line class="cls-2" x1="135.33" y1="45.24" x2="130.64" y2="46.41"/>
    <line class="cls-2" x1="134.37" y1="48.57" x2="135.69" y2="53.22"/>
    <line class="cls-2" x1="139.06" y1="47.39" x2="134.37" y2="48.57"/>
    <line class="cls-2" x1="139.2" y1="33.31" x2="107.94" y2="51.36"/>
    <line class="cls-2" x1="126.91" y1="40.41" x2="131.6" y2="41.59"/>
    <line class="cls-2" x1="128.23" y1="35.76" x2="126.91" y2="40.41"/>
    <line class="cls-2" x1="130.64" y1="38.25" x2="135.33" y2="39.43"/>
    <line class="cls-2" x1="131.96" y1="33.6" x2="130.64" y2="38.25"/>
    <line class="cls-2" x1="134.37" y1="36.1" x2="139.06" y2="37.28"/>
    <line class="cls-2" x1="135.69" y1="31.45" x2="134.37" y2="36.1"/>
    <line class="cls-2" x1="120.23" y1="44.26" x2="115.54" y2="43.08"/>
    <line class="cls-2" x1="118.91" y1="48.91" x2="120.23" y2="44.26"/>
    <line class="cls-2" x1="116.5" y1="46.41" x2="111.81" y2="45.24"/>
    <line class="cls-2" x1="115.18" y1="51.07" x2="116.5" y2="46.42"/>
    <line class="cls-2" x1="112.77" y1="48.57" x2="108.08" y2="47.39"/>
    <line class="cls-2" x1="111.45" y1="53.22" x2="112.77" y2="48.57"/>
    <path class="cls-5" d="M145.84,67.5h-6.28l4.44-4.44c.18-.18.18-.47,0-.65-.18-.18-.47-.18-.65,0l-4.44,4.44v-6.28c0-.25-.21-.46-.46-.46s-.46.21-.46.46v6.28l-4.44-4.44c-.18-.18-.47-.18-.65,0-.18.18-.18.47,0,.65l4.44,4.44h-6.28c-.25,0-.46.21-.46.46s.21.46.46.46h6.28l-4.44,4.44c-.18.18-.18.47,0,.65.09.09.21.13.33.13s.24-.04.33-.13l4.44-4.44v6.28c0,.25.21.46.46.46s.46-.21.46-.46v-6.28l4.44,4.44c.09.09.21.13.33.13s.24-.04.33-.13c.18-.18.18-.47,0-.65l-4.44-4.44h6.28c.25,0,.46-.21.46-.46s-.21-.46-.46-.46Z"/>
    <path class="cls-5" d="M98.28,11.38h-2.45l1.73-1.73c.07-.07.07-.18,0-.25-.07-.07-.18-.07-.25,0l-1.73,1.73v-2.45c0-.1-.08-.18-.18-.18s-.18.08-.18.18v2.45l-1.73-1.73c-.07-.07-.18-.07-.25,0-.07.07-.07.18,0,.25l1.73,1.73h-2.45c-.1,0-.18.08-.18.18s.08.18.18.18h2.45l-1.73,1.73c-.07.07-.07.18,0,.25.03.03.08.05.13.05s.09-.02.13-.05l1.73-1.73v2.45c0,.1.08.18.18.18s.18-.08.18-.18v-2.45l1.73,1.73s.08.05.13.05.09-.02.13-.05c.07-.07.07-.18,0-.25l-1.73-1.73h2.45c.1,0,.18-.08.18-.18s-.08-.18-.18-.18Z"/>
  </g>
</svg>`;
      
      const img = new Image();
      const svg = new Blob([svgString], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(svg);
      
      img.onload = function() {
        context.drawImage(img, x, y, size, size);
        URL.revokeObjectURL(url);
      };
      
      img.src = url;
    }

    function downloadCanvasAsImage() {
      let image = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');
      let link = document.createElement('a');
      link.download = 'my-canvas.png';
      link.href = image;
      link.click();
    }

    function randomPalette() {
      const randomIndex = Math.floor(Math.random() * (colorPalettes.length - 1)) + 1;
      colors = colorPalettes[randomIndex];
      isChristmasMode = false;
      drawGrid();
    }

    function christmasMode() {
      colors = colorPalettes[0]; // AZ Blue palette
      isChristmasMode = true;
      selectedSvgDesign = 3; // Always use design 3 (snowflakes with varied sizes)
      // Commented out random selection - uncomment to enable multiple SVG designs:
      // selectedSvgDesign = Math.floor(Math.random() * 4);
      drawGrid();
    }

    window.addEventListener('resize', () => {
      setCanvasSize();
      drawGrid();
    });

    document.getElementById('downloadBtn').addEventListener('click', downloadCanvasAsImage);

    function refreshPage() {
      location.reload();
    }

    setCanvasSize();
    drawGrid();
  </script>
</body>
</html>
