<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bauhaus Grid</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    canvas {
      display: block;
      width: 100vw;
      background: #f0f0f0;
    }

    #downloadBtn, #refreshBtn, #randomPaletteBtn, #christmasBtn {
      max-width: 200px;
      box-shadow: 1px 1px 1px #0000003b;
      opacity: 1;
      color: #333;
      font-weight: 400;
      text-transform: uppercase;
      font-size: 13px;
      font-family: 'open sans';
      display: inline-flex;
      align-items: center;
    }

    #downloadBtn:hover, #refreshBtn:hover, #randomPaletteBtn:hover, #christmasBtn:hover {
      opacity: 1;
    }

    .buttons {
      position: absolute;
      left: 2%;
      bottom: 0px;
      height: 60px;
    }

    button {
      background-color: #fff;
      display: inline-block;
      padding: 8px 20px 8px 16px;
      margin-right: 5px;
      cursor: pointer;
      border:1px solid aliceblue;
    }
    #downloadBtn:hover, #refreshBtn:hover, #randomPaletteBtn:hover, #christmasBtn:hover{
     background-color: aliceblue;
    }

    .fa {
      margin-right: 8px;
    }
  </style>
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <div class="buttons">
    <button id="downloadBtn"><i class="fa fa-download"></i>Download</button>
    <button onclick="refreshPage()" id="refreshBtn"><i class="fa fa-sync-alt"></i>AZ Blue</button>
    <button onclick="christmasMode()" id="christmasBtn"><i class="fa fa-tree"></i>AZ Blue Christmas</button>
    <button onclick="randomPalette()" id="randomPaletteBtn"><i class="fa fa-palette"></i>Random</button>
  </div>
  <canvas id="gridCanvas" width="1440" height="960"></canvas>

  <script>
    const canvas = document.getElementById('gridCanvas');
    const ctx = canvas.getContext('2d');

    let minCellsAcross = 8;
    let isChristmasMode = false;
    let selectedSvgDesign = Math.floor(Math.random() * 3); // Pick one SVG for the entire page

    // Christmas color palette for SVG
    const christmasColors = ['#FBB24C', '#E7EAF1', '#F58220', '#0099D8', '#FFFFFF'];

    const colorPalettes = [
      ['#F58220', '#FBB24C', '#0099D8', '#FFFFFF', '#E7EAF1'], // AZ Blue
      ['#F1AA00', '#F525BC', '#ED2992', '#C11DB3', '#45A5F2', '#94EAA4', '#ffffff'], // Pow!
      ['#FEC028', '#EE5A31', '#1F2A39', '#F8A4BC', '#7B9AAB', '#A89E32', '#0B806B', '#ffffff'], // Tropics
      ['#444343', '#2d2c2c', '#312f2f', '#3b3a3a', '#1a1a1a'], //Carbon
      ['#ccc5b9', '#252422', '#403d39', '#eb5e28', '#fffcf2'], //Terracotta
      ['#026173', '#fa8a57', '#dda850', '#e9bg9c', '#db5659', '#b5d5ca'], //Terra
      ['#D23031', '#F54337', '#B71B1C', '#FF9C00', '#FF6100'], // Ember
      ['#9E50BE', '#D680D9', '#300EA1', '#6D28C3', '#F2C2F4'], // Orchid
      ['#4E8098', '#A2C3DB', '#E7D4C9', '#FB9F89', '#EF6F6C'], // Dream
      ['#0F4C81', '#2A7B9B', '#F18F01', '#F06000', '#D9C8B4'], // Punch
      ['#88CCF1', '#F76C5E', '#F9A620', '#2A2E32', '#E4E4E4'], //Tucan
      ['#1A535C', '#4ECDC4', '#FF6B6B', '#FFE66D', '#F7FFF7'], // Exotica
      ['#03060D', '#011C26', '#014040', '#185941', '#F2F2F2'], // Swampthing
      ['#001542', '#085454', '#7A7A7A', '#FFFFFF', '#FFB30D'], // Swampthing
      ['#0597F2', '#05AFF2', '#05C7F2', '#F2D479', '#D96523'], // Swampthing
      ['#025159', '#038C5A', '#04D976', '#03A65A', '#04D960'], // Swampthing
      ['#593C23', '#BFAE9F', '#A65C41', '#401B13', '#8C2920'], // Swampthing
      ['#3D5A73', '#2F3D40', '#455559', '#28403D', '#182625'], // Swampthing
      ['#8A74B2', '#BB738A', '#E87264', '#F98162', '#FFAE82'], // Swampthing
    ];

    let colors = colorPalettes[0]; // Default to the first palette

    function setCanvasSize() {
      canvas.width = window.innerWidth;
      const cellSize = canvas.width / minCellsAcross;
      const rows = Math.ceil(window.innerHeight / cellSize);
      canvas.height = rows * cellSize;
    }

    function calculateGrid() {
      const cellSize = canvas.width / minCellsAcross;
      const cols = Math.floor(canvas.width / cellSize);
      const rows = Math.floor(canvas.height / cellSize);
      return { cellSize, rows, cols };
    }

    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      const { cellSize, rows, cols } = calculateGrid();

      for (let row = 0; row < rows; row++) {
        for (let col = 0; col < cols; col++) {
          ctx.fillStyle = 'transparent';
          ctx.strokeStyle = 'transparent';

          const bgColor = colors[Math.floor(Math.random() * colors.length)];
          ctx.fillStyle = getFillStyle(bgColor, col * cellSize, row * cellSize, cellSize);
          ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);

          const shapeColors = colors.filter(c => c !== bgColor);
          const shapeColor = shapeColors[Math.floor(Math.random() * shapeColors.length)];

          if (isChristmasMode) {
            drawSvgShape(ctx, col * cellSize, row * cellSize, cellSize, bgColor);
          } else {
            drawQuarterCircle(ctx, col * cellSize, row * cellSize, cellSize, shapeColor);
          }
        }
      }
    }

    function getFillStyle(color, x, y, size) {
      return color;
    }

    function drawQuarterCircle(context, x, y, size, color) {
      context.fillStyle = color;
      const corners = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];
      const corner = corners[Math.floor(Math.random() * corners.length)];

      context.beginPath();
      switch (corner) {
        case 'top-left':
          context.moveTo(x, y);
          context.arc(x, y, size, 0, Math.PI / 2);
          break;
        case 'top-right':
          context.moveTo(x + size, y);
          context.arc(x + size, y, size, Math.PI / 2, Math.PI);
          break;
        case 'bottom-left':
          context.moveTo(x, y + size);
          context.arc(x, y + size, size, 1.5 * Math.PI, 0);
          break;
        case 'bottom-right':
          context.moveTo(x + size, y + size);
          context.arc(x + size, y + size, size, Math.PI, 1.5 * Math.PI);
          break;
      }
      context.closePath();
      context.fill();
    }

    function getRandomColors() {
      // Shuffle the colors array and pick first 3
      const availableColors = [...christmasColors];
      const shuffled = availableColors.sort(() => Math.random() - 0.5);
      return {
        cls2: shuffled[0],
        cls3: shuffled[1],
        cls4: shuffled[2]
      };
    }

    function drawSvgShape(context, x, y, size, bgColor) {
      // Get three random colors different from background and from each other
      const colorSet = getRandomColors();
      
      // Random rotation: 0, 90, 180, or 270 degrees
      const rotations = [0, 90, 180, 270];
      const rotation = rotations[Math.floor(Math.random() * rotations.length)];
      
      // Use the pre-selected SVG design for all cells
      let svgString;
      
      if (selectedSvgDesign === 0) {
        // First SVG design (snowflakes - updated)
        svgString = `<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1_copy" xmlns="http://www.w3.org/2000/svg" viewBox="82.66 1.24 80 80">
  <defs>
    <style>.cls-1{fill:none;}.cls-2{fill:${colorSet.cls3};}.cls-3{fill:${colorSet.cls4};}.cls-4{fill:${colorSet.cls2};}.cls-5{clip-path:url(#clippath);}</style>
    <clipPath id="clippath"><rect class="cls-1" x="82.66" y="1.24" width="80" height="80"/></clipPath>
  </defs>
  <g class="cls-5" transform="rotate(${rotation} 122.66 41.24)">
    <rect class="cls-3" x="82.66" y="1.24" width="80" height="80"/>
    <path class="cls-4" d="M82.66,1.24h0v80h80C162.66,37.05,126.85,1.24,82.66,1.24Z"/>
    <path class="cls-2" d="M89.25,43.33v-10.28l7.27,7.27c.29.29.77.29,1.06,0,.29-.29.29-.77,0-1.06l-7.27-7.27h10.28c.42,0,.75-.34.75-.75s-.34-.75-.75-.75h-10.28l7.27-7.27c.29-.29.29-.77,0-1.06-.29-.29-.77-.29-1.06,0l-7.27,7.27v-10.28c0-.42-.34-.75-.75-.75s-.75.34-.75.75v10.28l-7.27-7.27c-.29-.29-.77-.29-1.06,0-.15.15-.22.34-.22.53s.07.38.22.53l7.27,7.27h-10.28c-.42,0-.75.34-.75.75s.34.75.75.75h10.28l-7.27,7.27c-.15.15-.22.34-.22.53s.07.38.22.53c.29.29.77.29,1.06,0l7.27-7.27v10.28c0,.42.34.75.75.75s.75-.34.75-.75Z"/>
    <path class="cls-2" d="M61.18,56.3v-10.28l7.27,7.27c.29.29.77.29,1.06,0,.29-.29.29-.77,0-1.06l-7.27-7.27h10.28c.42,0,.75-.34.75-.75s-.34-.75-.75-.75h-10.28l7.27-7.27c.29-.29.29-.77,0-1.06-.29-.29-.77-.29-1.06,0l-7.27,7.27v-10.28c0-.42-.34-.75-.75-.75s-.75.34-.75.75v10.28l-7.27-7.27c-.29-.29-.77-.29-1.06,0-.15.15-.22.34-.22.53s.07.38.22.53l7.27,7.27h-10.28c-.42,0-.75.34-.75.75s.34.75.75.75h10.28l-7.27,7.27c-.15.15-.22.34-.22.53s.07.38.22.53c.29.29.77.29,1.06,0l7.27-7.27v10.28c0,.42.34.75.75.75s.75-.34.75-.75Z"/>
    <path class="cls-2" d="M63.98,107.04v-10.28l7.27,7.27c.29.29.77.29,1.06,0,.29-.29.29-.77,0-1.06l-7.27-7.27h10.28c.42,0,.75-.34.75-.75s-.34-.75-.75-.75h-10.28l7.27-7.27c.29-.29.29-.77,0-1.06s-.77-.29-1.06,0l-7.27,7.27v-10.28c0-.42-.34-.75-.75-.75s-.75.34-.75.75v10.28l-7.27-7.27c-.29-.29-.77-.29-1.06,0-.15.15-.22.34-.22.53s.07.38.22.53l7.27,7.27h-10.28c-.42,0-.75.34-.75.75s.34.75.75.75h10.28l-7.27,7.27c-.15.15-.22.34-.22.53s.07.38.22.53c.29.29.77.29,1.06,0l7.27-7.27v10.28c0,.42.34.75.75.75s.75-.34.75-.75Z"/>
    <path class="cls-2" d="M133.42,98.33v-10.28l7.27,7.27c.29.29.77.29,1.06,0s.29-.77,0-1.06l-7.27-7.27h10.28c.42,0,.75-.34.75-.75s-.34-.75-.75-.75h-10.28l7.27-7.27c.29-.29.29-.77,0-1.06-.29-.29-.77-.29-1.06,0l-7.27,7.27v-10.28c0-.42-.34-.75-.75-.75s-.75.34-.75.75v10.28l-7.27-7.27c-.29-.29-.77-.29-1.06,0-.15.15-.22.34-.22.53s.07.38.22.53l7.27,7.27h-10.28c-.42,0-.75.34-.75.75s.34.75.75.75h10.28l-7.27,7.27c-.15.15-.22.34-.22.53s.07.38.22.53c.29.29.77.29,1.06,0l7.27-7.27v10.28c0,.42.34.75.75.75s.75-.34.75-.75Z"/>
    <path class="cls-2" d="M101.25,132.73v-10.28l7.27,7.27c.29.29.77.29,1.06,0s.29-.77,0-1.06l-7.27-7.27h10.28c.42,0,.75-.34.75-.75s-.34-.75-.75-.75h-10.28l7.27-7.27c.29-.29.29-.77,0-1.06s-.77-.29-1.06,0l-7.27,7.27v-10.28c0-.42-.34-.75-.75-.75s-.75.34-.75.75v10.28l-7.27-7.27c-.29-.29-.77-.29-1.06,0-.15.15-.22.34-.22.53s.07.38.22.53l7.27,7.27h-10.28c-.42,0-.75.34-.75.75s.34.75.75.75h10.28l-7.27,7.27c-.15.15-.22.34-.22.53s.07.38.22.53c.29.29.77.29,1.06,0l7.27-7.27v10.28c0,.42.34.75.75.75s.75-.34.75-.75Z"/>
    <circle class="cls-2" cx="102.87" cy="62.21" r="9.15"/>
    <circle class="cls-2" cx="82.71" cy="81.02" r="5.72"/>
    <circle class="cls-2" cx="129.01" cy="114.91" r="5.72"/>
    <circle class="cls-2" cx="69.64" cy="16.53" r="5.72"/>
    <circle class="cls-2" cx="39.11" cy="53.12" r="5.72"/>
    <circle class="cls-2" cx="110.17" cy="91.57" r="4.9"/>
    <circle class="cls-2" cx="58.52" cy="72.23" r="3.58"/>
    <circle class="cls-2" cx="38.04" cy="81.45" r="6.79"/>
    <circle class="cls-2" cx="72.5" cy="126.88" r="3.58"/>
    <circle class="cls-2" cx="148.43" cy="92.53" r="3.94"/>
    <circle class="cls-2" cx="87.65" cy="101.1" r="3.94"/>
    <circle class="cls-2" cx="133.16" cy="41.49" r="6"/>
    <circle class="cls-2" cx="152.37" cy="57.05" r="3.39"/>
    <circle class="cls-2" cx="129.01" cy="24.12" r="3.39"/>
    <circle class="cls-2" cx="110.41" cy="31.58" r="2.18"/>
    <circle class="cls-2" cx="48.17" cy="102.44" r="3.34"/>
    <path class="cls-2" d="M127.68,62.56v-3.79l2.68,2.68c.11.11.28.11.39,0,.11-.11.11-.28,0-.39l-2.68-2.68h3.79c.15,0,.28-.12.28-.28s-.12-.28-.28-.28h-3.79l2.68-2.68c.11-.11.11-.28,0-.39-.11-.11-.28-.11-.39,0l-2.68,2.68v-3.79c0-.15-.12-.28-.28-.28s-.28.12-.28.28v3.79l-2.68-2.68c-.11-.11-.28-.11-.39,0-.05.05-.08.13-.08.2s.03.14.08.2l2.68,2.68h-3.79c-.15,0-.28.12-.28.28s.12.28.28.28h3.79l-2.68,2.68c-.05.05-.08.13-.08.2s.03.14.08.2c.11.11.28.11.39,0l2.68-2.68v3.79c0,.15.12.28.28.28s.28-.12.28-.28Z"/>
    <circle class="cls-2" cx="83.05" cy="56.24" r="3.39"/>
    <circle class="cls-2" cx="97.14" cy="10.55" r="2.18"/>
    <circle class="cls-2" cx="107.66" cy="81.85" r="3.39"/>
  </g>
</svg>`;
      } else if (selectedSvgDesign === 1) {
        // Second SVG design (ornate)
        svgString = `<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="77.06 0 80 80">
  <defs>
    <style>.cls-1{fill:none;}.cls-2{fill:${colorSet.cls2};}.cls-3{fill:${colorSet.cls3};}.cls-4{fill:${colorSet.cls4};}.cls-6{clip-path:url(#clippath);}</style>
    <clipPath id="clippath"><rect class="cls-1" x="77.06" width="80" height="80"/></clipPath>
  </defs>
  <g class="cls-6" transform="rotate(${rotation} 117.06 40)">
    <rect class="cls-4" x="77.06" width="80" height="80"/>
    <path class="cls-2" d="M77.06,0h0v80h80C157.06,35.82,121.24,0,77.06,0Z"/>
    <circle class="cls-3" cx="66.28" cy="11.65" r="5.19"/>
    <circle class="cls-3" cx="77.63" cy="79.93" r="5.19"/>
    <circle class="cls-3" cx="94.95" cy="141.33" r="5.19"/>
    <circle class="cls-3" cx="141.75" cy="94.19" r="5.19"/>
    <circle class="cls-3" cx="125.5" cy="35.13" r="5.19"/>
    <circle class="cls-3" cx="23.39" cy="59.27" r="5.19"/>
    <circle class="cls-3" cx="32.95" cy="124.32" r="5.19"/>
    <path class="cls-3" d="M95.93,72.98c-.14.05-.23-.19-.07-.24,16.22-5.32,32.93-9.07,49.71-12.18.87-.15,1.84-.32,2.83-.5-.98-1.3-3.28-1.5-3.28-1.5-10.93-3.86-11.83-7.87-11.83-7.87,0,0,.41,2.64-3.81,7.61-4.22,4.97-11.33-3.83-11.33-3.83,0,0,.47,3.73-2.24,7.16-2.71,3.43-10.15-1.13-10.15-1.13-1.26,9.44-15.68,13.47-15.68,13.47,8.75-1.44,19.92,7.66,19.92,7.66,0,0,2.5-3.38,6.46-6.25,3.96-2.87,9.28,5.15,9.28,5.15,0,0,1.2-4.64,5.04-6.95,3.84-2.31,8.49,3.39,8.49,3.39,1.01-8.24,7.1-11.92,7.1-11.92,0,0,1.98-.88,2.4-2.84-17.8,2.42-35.54,5.82-52.82,10.76Z"/>
    <path class="cls-3" d="M125.02,128.22s-6.59-2.68-13.8,1.45c0,0,1.77-7.13-2.37-8.82-4.14-1.69-8.58.13-8.58.13,0,0,3.24-9.07-1.43-10.52-4.67-1.45-8.87-1.43-8.87-1.43,0,0,.59-14.39-5.8-20.54,0,0,11.86,9.13,20.18,4.49,0,0,.81,8.69,5.18,8.81,4.37.11,7.08-2.5,7.08-2.5,0,0-2.79,10.97,3.72,11.37s8.38-1.51,8.38-1.51c0,0-2.67,3.12.79,14.18,0,0,1.86,3,.13,4.52-2.04,1.8-4.6.36-4.6.36Z"/>
    <path class="cls-3" d="M60.62,146.61s-1.05-7.04-8.28-11.13c0,0,7.04-2.11,6.39-6.53-.66-4.43-4.48-7.32-4.48-7.32,0,0,9.45-1.83,8.32-6.59-1.13-4.76-3.29-8.36-3.29-8.36,0,0,12.69-6.82,14.72-15.45,0,0-1.81,14.86,6.41,19.65,0,0-7.07,5.12-4.94,8.94s5.75,4.82,5.75,4.82c0,0-10.86,3.19-7.89,8.99,2.97,5.8,5.56,6.44,5.56,6.44,0,0-4.04-.71-11.81,7.9,0,0-1.63,3.13-3.82,2.42-2.59-.84-2.65-3.77-2.65-3.77Z"/>
    <path class="cls-3" d="M8.14,88.21s6.37-3.18,8.02-11.32c0,0,4.18,6.04,8.19,4.05,4.01-2,5.57-6.53,5.57-6.53,0,0,4.67,8.42,8.84,5.87s6.93-5.72,6.93-5.72c0,0,10.41,9.95,19.25,9.21,0,0-14.69,2.88-16.69,12.19,0,0-7.06-5.14-10.03-1.93s-2.8,6.96-2.8,6.96c0,0-6.39-9.34-10.99-4.72-4.6,4.62-4.4,7.28-4.4,7.28,0,0-.58-4.06-11.17-8.78,0,0-3.48-.58-3.48-2.89,0-2.72,2.77-3.69,2.77-3.69Z"/>
    <path class="cls-3" d="M32,27.6s6.18,3.53,13.87.38c0,0-2.7,6.84,1.19,9.06,3.89,2.22,8.53,1.01,8.53,1.01,0,0-4.4,8.56.03,10.61,4.44,2.05,8.61,2.59,8.61,2.59,0,0-2.49,14.19,3.04,21.12,0,0-10.55-10.61-19.41-7.11,0,0,.34-8.72-3.97-9.41-4.32-.69-7.35,1.54-7.35,1.54,0,0,4.21-10.51-2.19-11.76-6.4-1.26-8.5.39-8.5.39,0,0,3.06-2.74,1.09-14.16,0,0-1.45-3.22.46-4.5,2.26-1.52,4.6.25,4.6.25Z"/>
    <path class="cls-3" d="M103.02,41.07s-3.41-3.37-3.49-7.85c-.07-4.48,7.18-5.65,7.18-5.65-6.63-5-6.75-12.12-6.75-12.12,0,0,.23-2.15-1.26-3.5-6.83,16.62-12.78,33.67-17.17,51.1-.03.15-.28.1-.24-.05,3.53-16.7,8.66-33.04,14.38-49.12.31-.82.64-1.75.99-2.7-1.61.19-2.94,2.09-2.94,2.09-8.82,7.52-12.74,6.29-12.74,6.29,0,0,2.49.97,4.67,7.11,2.19,6.14-9,7.88-9,7.88,0,0,3.46,1.47,5.08,5.53,1.61,4.06-6.06,8.22-6.06,8.22,7.53,5.82,3.8,20.32,3.8,20.32,3.14-8.29,16.61-13.39,16.61-13.39,0,0-1.67-3.86-2.17-8.72-.5-4.86,9.11-5.45,9.11-5.45Z"/>
  </g>
</svg>`;
      } else {
        // Third SVG design (swirls)
        svgString = `<?xml version="1.0" encoding="UTF-8"?>
<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="82.66 1.24 80 80">
  <defs>
    <style>.cls-1{fill:none;}.cls-2{fill:${colorSet.cls2};}.cls-4{fill:${colorSet.cls3};}.cls-5{fill:${colorSet.cls4};}.cls-7{clip-path:url(#clippath);}</style>
    <clipPath id="clippath"><rect class="cls-1" x="82.66" y="1.24" width="80" height="80"/></clipPath>
  </defs>
  <g class="cls-7" transform="rotate(${rotation} 122.66 41.24)">
    <rect class="cls-5" x="82.66" y="1.24" width="80" height="80"/>
    <path class="cls-2" d="M82.66,1.24h0v80h80C162.66,37.05,126.85,1.24,82.66,1.24Z"/>
    <path class="cls-4" d="M12.36,38.33c1.06-1.7,2.19-3.35,3.37-4.96,2.47-3.37,5.2-6.55,8.15-9.5,2.95-2.95,6.12-5.67,9.5-8.15,1.2-.88,2.43-1.73,3.68-2.55C50.87,4.85,65.82.41,81.5,0,65.21.89,26.58,16.12,12.36,38.33"/>
    <path class="cls-4" d="M6.83,114.22c-1-2.27-1.89-4.59-2.68-6.96-1.35-4.05-2.39-8.24-3.09-12.54C.36,90.42,0,86,0,81.5c0-1.12.02-2.23.07-3.34.69-6.91,1.98-19.77,20.31-37.26C38.32,23.77,61.57,14.65,81.46.45c.01-.13.03-.31.05-.45,3.47.18,12.7.68.55,11.38C59.84,30.98,32.91,45.16,14.97,69.68c-7.77,10.62-15.49,26.97-8.14,44.54"/>
    <path class="cls-4" d="M88.38.29c67.86,7.59,16.74,53.9-7.82,76.16-28.91,26.19-77.28,70.02-16.16,84.75-2.95-.63-5.84-1.42-8.66-2.36-4.05-1.35-7.96-3-11.69-4.94-3.74-1.94-7.31-4.16-10.68-6.63-.46-.34-.92-.68-1.38-1.03C.26,119.85,24.35,89.16,76.67,45.08,101.06,24.53,121.7.03,81.5,0c2.32,0,4.61.1,6.88.29"/>
    <path class="cls-4" d="M151.58,39.89c18.12,35.94-24.68,69.21-55.93,93.51-16.6,12.9-37.26,28.96-14.15,29.6-17.65-.52-42.34-6.1-9.31-37.6,14.7-14.02,30.94-26.34,45.09-40.97,6.9-7.13,16.26-18.78,20-26.32,3.74-7.53,13.68-27.52-9.83-43.91,9.79,6.7,18.04,15.48,24.12,25.7"/>
    <path class="cls-4" d="M162.99,81.5c0,12.3-2.73,23.97-7.61,34.42-17.38,31.4-67.17,46.77-73.88,47.07-.17-.04-.41-.09-.58-.12.7-1.43.83-1.69,13.44-9.18,42.19-25.07,66.94-45.14,68.62-73.54,0,.45.01.9.01,1.35"/>
  </g>
</svg>`;
      }
      
      const img = new Image();
      const svg = new Blob([svgString], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(svg);
      
      img.onload = function() {
        context.drawImage(img, x, y, size, size);
        URL.revokeObjectURL(url);
      };
      
      img.src = url;
    }

    function downloadCanvasAsImage() {
      let image = canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');
      let link = document.createElement('a');
      link.download = 'my-canvas.png';
      link.href = image;
      link.click();
    }

    function randomPalette() {
      const randomIndex = Math.floor(Math.random() * (colorPalettes.length - 1)) + 1;
      colors = colorPalettes[randomIndex];
      isChristmasMode = false;
      drawGrid();
    }

    function christmasMode() {
      colors = colorPalettes[0]; // AZ Blue palette
      isChristmasMode = true;
      selectedSvgDesign = Math.floor(Math.random() * 3); // Pick a new random SVG
      drawGrid();
    }

    window.addEventListener('resize', () => {
      setCanvasSize();
      drawGrid();
    });

    document.getElementById('downloadBtn').addEventListener('click', downloadCanvasAsImage);

    function refreshPage() {
      location.reload();
    }

    setCanvasSize();
    drawGrid();
  </script>
</body>
</html>
