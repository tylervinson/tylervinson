<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            padding: 40px;
            background: #e8691a;
            background: linear-gradient(135deg, #e8691a 0%, #d45a0a 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #3a3a3a;
            padding: 40px;
            border-radius: 16px 0 16px 0;
            border: 2px solid #e8691a;
        }

        h1 {
            margin-bottom: 30px;
            color: #ffffff;
            font-size: 32px;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .preview-box {
            position: relative;
            width: 100%;
            min-height: 400px;
            border: 2px solid #555;
            border-radius: 12px 0 12px 0;
            margin-bottom: 30px;
            background: #2a2a2a;
            padding: 20px;
            display: none;
        }

        .preview-box.active {
            display: block;
        }

        .button-container {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .icon-button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 8px 0 8px 0;
            background: #4a4a4a;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.2s;
            color: #e8691a;
        }

        .icon-button:hover {
            background: #5a5a5a;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(232, 105, 26, 0.3);
        }

        .icon-button:active {
            transform: translateY(0);
        }

        .icon-button svg {
            width: 22px;
            height: 22px;
            stroke: #e8691a;
        }

        .copy-button {
            display: none;
        }

        .copy-button.active {
            display: flex;
        }

        .zoom-controls {
            display: none;
        }

        .zoom-controls.active {
            display: flex;
            gap: 10px;
        }

        .copy-feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #e8691a;
            color: white;
            padding: 8px 16px;
            border-radius: 6px 0 6px 0;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .copy-feedback.show {
            opacity: 1;
        }

        .svg-display {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 360px;
            overflow: hidden;
            position: relative;
            cursor: grab;
        }

        .svg-display.grabbing {
            cursor: grabbing;
        }

        .svg-container {
            transition: transform 0.1s ease-out;
            transform-origin: center center;
        }

        .svg-container svg {
            max-width: 100%;
            max-height: 360px;
        }

        .code-display {
            display: none;
            width: 100%;
            height: 360px;
            overflow: auto;
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 0;
            border-radius: 8px 0 8px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre;
            border: 1px solid #404040;
        }

        .code-content {
            padding: 60px 20px 20px 20px;
        }

        .code-display.active {
            display: block;
        }

        .code-display::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        .code-display::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 4px;
        }

        .code-display::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        .code-display::-webkit-scrollbar-thumb:hover {
            background: #666;
        }

        .file-input-container {
            margin-top: 20px;
            position: relative;
        }

        .file-input-wrapper {
            position: relative;
            display: block;
        }

        input[type="file"] {
            padding: 14px 60px 14px 24px;
            border: none;
            border-radius: 8px 0 8px 0;
            background: #4a4a4a;
            color: #ffffff;
            cursor: pointer;
            font-size: 15px;
            transition: all 0.2s;
            width: 100%;
        }

        input[type="file"]:hover {
            background: #5a5a5a;
        }

        input[type="file"]::file-selector-button {
            display: none;
        }

        .file-icon-button {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            pointer-events: none;
        }

        .file-icon-button svg {
            width: 24px;
            height: 24px;
            stroke: #e8691a;
            transition: stroke 0.2s;
        }

        input[type="file"]:hover + .file-icon-button svg {
            stroke: #ff7a2a;
        }

        .error-message {
            color: #ff6b6b;
            margin-top: 12px;
            font-size: 14px;
            display: none;
            padding: 10px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 6px 0 6px 0;
            border-left: 3px solid #ff6b6b;
        }

        .error-message.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SVG Viewer</h1>
        
        <div class="preview-box" id="previewBox">
            <div class="button-container">
                <div class="zoom-controls" id="zoomControls">
                    <button class="icon-button" id="zoomOutBtn" title="Zoom Out">
                        <!-- Zoom out icon -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                        </svg>
                    </button>
                    <button class="icon-button" id="zoomResetBtn" title="Reset Zoom">
                        <!-- Reset icon -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                            <path d="M3 21v-5h5"></path>
                        </svg>
                    </button>
                    <button class="icon-button" id="zoomInBtn" title="Zoom In">
                        <!-- Zoom in icon -->
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            <line x1="11" y1="8" x2="11" y2="14"></line>
                            <line x1="8" y1="11" x2="14" y2="11"></line>
                        </svg>
                    </button>
                </div>
                <button class="icon-button copy-button" id="copyBtn" title="Copy SVG Code">
                    <!-- Copy icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                </button>
                <button class="icon-button" id="inspectBtn" title="Inspect SVG Code">
                    <!-- Code icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                </button>
                <button class="icon-button" id="clearBtn" title="Clear">
                    <!-- X icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <div class="copy-feedback" id="copyFeedback">Copied!</div>
            
            <div class="svg-display" id="svgDisplay"></div>
            <div class="code-display" id="codeDisplay">
                <div class="code-content" id="codeContent"></div>
            </div>
        </div>

        <div class="file-input-container">
            <div class="file-input-wrapper">
                <input type="file" id="svgFileInput" accept=".svg,image/svg+xml">
                <div class="file-icon-button">
                    <!-- Upload/folder icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
            </div>
            <div class="error-message" id="errorMessage"></div>
        </div>
    </div>

    <script>
        const fileInput = document.getElementById('svgFileInput');
        const previewBox = document.getElementById('previewBox');
        const svgDisplay = document.getElementById('svgDisplay');
        const codeDisplay = document.getElementById('codeDisplay');
        const codeContent = document.getElementById('codeContent');
        const inspectBtn = document.getElementById('inspectBtn');
        const clearBtn = document.getElementById('clearBtn');
        const copyBtn = document.getElementById('copyBtn');
        const copyFeedback = document.getElementById('copyFeedback');
        const errorMessage = document.getElementById('errorMessage');
        const zoomControls = document.getElementById('zoomControls');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const zoomResetBtn = document.getElementById('zoomResetBtn');

        let svgContent = '';
        let isCodeView = false;
        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let startX = 0;
        let startY = 0;
        let svgContainer = null;

        // Handle file selection
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            
            if (!file) return;

            // Validate file type
            if (!file.type.match('image/svg.*') && !file.name.endsWith('.svg')) {
                showError('Please select a valid SVG file.');
                return;
            }

            // Read and display the SVG
            const reader = new FileReader();
            
            reader.onload = function(event) {
                svgContent = event.target.result;
                displaySVG(svgContent);
                hideError();
                previewBox.classList.add('active');
                isCodeView = false;
                zoomControls.classList.add('active');
                updateInspectButton();
            };

            reader.onerror = function() {
                showError('Error reading file. Please try again.');
            };

            reader.readAsText(file);
        });

        // Display SVG in the preview box
        function displaySVG(content) {
            const wrapper = document.createElement('div');
            wrapper.className = 'svg-container';
            wrapper.innerHTML = content;
            svgDisplay.innerHTML = '';
            svgDisplay.appendChild(wrapper);
            svgContainer = wrapper;
            
            codeContent.textContent = formatXML(content);
            svgDisplay.style.display = 'flex';
            codeDisplay.classList.remove('active');
            
            // Reset zoom and pan
            resetZoom();
        }

        // Format XML for better readability
        function formatXML(xml) {
            let formatted = '';
            let indent = '';
            const tab = '  ';
            
            xml.split(/>\s*</).forEach(function(node) {
                if (node.match(/^\/\w/)) indent = indent.substring(tab.length);
                formatted += indent + '<' + node + '>\n';
                if (node.match(/^<?\w[^>]*[^\/]$/)) indent += tab;
            });
            
            return formatted.substring(1, formatted.length - 2);
        }

        // Toggle between image and code view
        inspectBtn.addEventListener('click', function() {
            isCodeView = !isCodeView;
            
            if (isCodeView) {
                svgDisplay.style.display = 'none';
                codeDisplay.classList.add('active');
                copyBtn.classList.add('active');
                zoomControls.classList.remove('active');
            } else {
                svgDisplay.style.display = 'flex';
                codeDisplay.classList.remove('active');
                copyBtn.classList.remove('active');
                zoomControls.classList.add('active');
            }
            
            updateInspectButton();
        });

        // Update inspect button icon
        function updateInspectButton() {
            if (isCodeView) {
                // Image icon
                inspectBtn.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                `;
                inspectBtn.title = 'View Image';
            } else {
                // Code icon
                inspectBtn.innerHTML = `
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="16 18 22 12 16 6"></polyline>
                        <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                `;
                inspectBtn.title = 'Inspect SVG Code';
            }
        }

        // Copy SVG code to clipboard
        copyBtn.addEventListener('click', function() {
            navigator.clipboard.writeText(svgContent).then(function() {
                // Show feedback
                copyFeedback.classList.add('show');
                setTimeout(function() {
                    copyFeedback.classList.remove('show');
                }, 2000);
            }).catch(function(err) {
                console.error('Failed to copy: ', err);
            });
        });

        // Zoom functionality
        function updateTransform() {
            if (svgContainer) {
                svgContainer.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
            }
        }

        function resetZoom() {
            scale = 1;
            translateX = 0;
            translateY = 0;
            updateTransform();
        }

        zoomInBtn.addEventListener('click', function() {
            scale = Math.min(scale * 1.2, 5);
            updateTransform();
        });

        zoomOutBtn.addEventListener('click', function() {
            scale = Math.max(scale / 1.2, 0.1);
            // Recenter the image when zooming out
            translateX = 0;
            translateY = 0;
            updateTransform();
        });

        zoomResetBtn.addEventListener('click', function() {
            resetZoom();
        });

        // Mouse wheel zoom
        svgDisplay.addEventListener('wheel', function(e) {
            if (!isCodeView && svgContainer) {
                e.preventDefault();
                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                scale = Math.min(Math.max(scale * delta, 0.1), 5);
                updateTransform();
            }
        });

        // Pan functionality
        svgDisplay.addEventListener('mousedown', function(e) {
            if (!isCodeView && svgContainer) {
                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
                svgDisplay.classList.add('grabbing');
            }
        });

        document.addEventListener('mousemove', function(e) {
            if (isDragging) {
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                updateTransform();
            }
        });

        document.addEventListener('mouseup', function() {
            isDragging = false;
            svgDisplay.classList.remove('grabbing');
        });

        // Clear form
        clearBtn.addEventListener('click', function() {
            fileInput.value = '';
            svgDisplay.innerHTML = '';
            codeContent.textContent = '';
            svgContent = '';
            svgContainer = null;
            previewBox.classList.remove('active');
            isCodeView = false;
            copyBtn.classList.remove('active');
            zoomControls.classList.remove('active');
            resetZoom();
            hideError();
            updateInspectButton();
        });

        // Error handling
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.add('active');
        }

        function hideError() {
            errorMessage.classList.remove('active');
        }
    </script>
</body>
</html>
