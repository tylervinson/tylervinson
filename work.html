<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weekly Calendar Form with Materialize Time Picker</title>
  
  <!-- Materialize CSS -->
  <link rel="stylesheet" href="work.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Parkinsans:wght@300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  
  <style>
    /* ========== Original Unmodified CSS ========== */

.parkinsans-title {
  font-family: "Parkinsans", sans-serif;
  font-optical-sizing: auto;
  font-weight: 300;
  font-style: normal;
}

button:focus {
    outline: none;
    background-color: #fff;
}
.mdc-button--outlined:hover {
    /* background-color: #f4f4f9; */
    /* color: #fff; */
    background-color: #fff;
    color: #42266d;
}

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background-color: #f4f4f9;
    }
    
    /* Card Style */
    .mdc-card {
      background: rgb(61, 36, 104);
      background: linear-gradient(180deg, rgba(61, 36, 104, 1) 0%, rgba(187, 88, 233, 1) 100%);
      padding: 60px;
      width: 100%;
      max-width: 475px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin: 16px;
      min-height: calc(100vh - 80px);
      display: flex;
  flex-direction: column;
  justify-content: space-between; /* Ensures space between content and footer */
    }

    /* Typography */
    .mdc-typography--headline5 {
      font-size: 3rem;
    margin-bottom: 3rem;
    text-align: center;
    margin-top: 10px;
    }
    .mdc-typography--headline6 {
      font-size: 1.6rem;
      margin-top: 1rem;
    }

    /* Layout Grid */
    .mdc-layout-grid {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Text Field Style */
    .mdc-text-field {
    position: relative;
    display: flex;
    flex-direction: column;
    width: 50%;
    margin-top: 10px;
}
    
.mdc-text-field__input {
    font-size: 1rem;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    outline: none;
    transition: border-color 0.3s ease;
    width: 90%;
}
    
    .mdc-text-field__input:focus {
      border-color: #6200ee;
    }
    
    .mdc-floating-label {
    top: -10px;
    left: 10px;
    font-size: 14px;
    color: #fff;
    transition: 0.2s ease;
    pointer-events: none;
    display: block;
    margin-bottom: 10px;
    }

    /* Button Style */
    .mdc-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 8px 16px;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
    }
    
    .mdc-button--raised {
      background-color: #fff;
      color: #42266d;
    }
    
    .mdc-button--raised:hover {
      background-color: #fff;
    }
    
    .mdc-button--outlined {
        background-color: #fff;
    border: none;
    color: #42266d;
}
    
    .mdc-button--outlined:hover {
      background-color: #fff;
    }

    /* Additional Styling for Containers */
   

    /* Add Button Container Styling */
    .add-button-container {
      display: flex;
      justify-content: right;
      width: 100%;
      margin-top: 10px;
      margin-bottom: 20px;
    }
/* ========== New/Modified CSS for Multi-Step Form ========== */

/* Time Fields in a Single Line */
.time-field-container {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}

/* Button Container for Multi-Step Form */
.button-container {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  margin-top: auto; /* Pushes the button container to the bottom */
}

/* Multi-Step Form: Hide Non-Active Steps */
.step {
  display: none;
}
.step.active {
  display: block;
}

  </style>
 <style>
  button, html [type="button"], [type="reset"], [type="submit"] {
    -webkit-appearance: button;
    appearance: button;
    height: 46px;
}
input:not([type]), input[type=text]:not(.browser-default), input[type=password]:not(.browser-default), input[type=email]:not(.browser-default), input[type=url]:not(.browser-default), input[type=time]:not(.browser-default), input[type=date]:not(.browser-default), input[type=datetime]:not(.browser-default), input[type=datetime-local]:not(.browser-default), input[type=tel]:not(.browser-default), input[type=number]:not(.browser-default), input[type=search]:not(.browser-default), textarea.materialize-textarea {
  border-bottom:1px solid #bf78fd;
    height: 2rem;
    color:#fff;
}
html {
    color: #fff;
}
.mdc-button--raised {
    background-color: #fff;
    color: #42266d;
}
.timepicker-digital-display {
    background-color: #3d2468;
}
.timepicker-close {
    color: #333;
}
.mdc-button--outlined {
    background-color: #fff;
    border: none;
    color: #42266d;
}
.mdc-button--raised:hover {
    background-color: #fff;
}
.addSchool{
  background-color:#000 !important;
  color:#fff !important;
  width:50px;
}
.addSchool:hover{
  background-color:#000 !important;
  color:#fff !important;
}
/* #form-wrapper {
  background: url(m.svg) no-repeat center center;
    background-size: cover;
    background-blend-mode: overlay;
    background-size: 110%;
    position: relative;
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #9e0549;
} */

.mdc-card {
  /* Retain the gradient on the form */
  background: linear-gradient(180deg, rgba(61, 36, 104, 1) 0%, rgba(187, 88, 233, 1) 100%);
  padding: 60px;
  width: 100%;
  max-width: 475px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  margin: 16px;
  min-height: calc(100vh - 80px);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
#nextButton,
#backButton,
#submitButton{
  margin-top:20px;
}
 </style>
 <style>
  
 </style>
</head>
<body>

  <div id="form-wrapper">
    <form id="weekly-calendar-form" class="mdc-card">
      <h1 class="mdc-typography--headline5 parkinsans-title">Ein Kalender<br>f√ºr Morgan</h1>
      <div id="calendar-container" class="mdc-layout-grid"></div>

      <div class="button-container">
        <button type="button" class="mdc-button mdc-button--outlined" id="backButton" onclick="prevStep()" style="display:none;">Back</button>
        <button type="button" class="mdc-button mdc-button--raised" id="nextButton" onclick="nextStep()">Next</button>
        <button type="button" class="mdc-button mdc-button--raised" id="submitButton" onclick="generatePDF()" style="display:none;">Submit</button>
      </div>
    </form>
  </div>
  <!-- Materialize JS and jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

  <script>
    const daysOfWeek = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
    const activities = ["Work", "School", "Art Class"];
    const calendarContainer = document.getElementById('calendar-container');

    let currentStep = 0;

    function initializeTimePicker(element) {
      M.Timepicker.init(element, {
        twelveHour: false,
        autoClose: true,
        onCloseEnd: () => element.blur()
      });
    }

    function createTimePicker(activity, day, uniqueId) {
      const timeFieldContainer = document.createElement('div');
      timeFieldContainer.classList.add('time-field-container');

      const startTimeField = document.createElement('div');
      startTimeField.classList.add('mdc-text-field');
      startTimeField.innerHTML = `
        <label class="mdc-floating-label">${activity} In</label>
        <input type="text" id="${day}-${activity}-start-${uniqueId}" name="${day}-${activity}-start-${uniqueId}" class="mdc-text-field__input timepicker">
      `;

      const endTimeField = document.createElement('div');
      endTimeField.classList.add('mdc-text-field');
      endTimeField.innerHTML = `
        <label class="mdc-floating-label">${activity} Out</label>
        <input type="text" id="${day}-${activity}-end-${uniqueId}" name="${day}-${activity}-end-${uniqueId}" class="mdc-text-field__input timepicker">
      `;

      timeFieldContainer.appendChild(startTimeField);
      timeFieldContainer.appendChild(endTimeField);

      setTimeout(() => {
        initializeTimePicker(document.getElementById(`${day}-${activity}-start-${uniqueId}`));
        initializeTimePicker(document.getElementById(`${day}-${activity}-end-${uniqueId}`));
      });

      return timeFieldContainer;
    }

    function createDaySection(day) {
      const daySection = document.createElement('div');
      daySection.classList.add('activity-container', 'step');
      daySection.innerHTML = `<h2 class="mdc-typography--headline6 parkinsans-title">${day}</h2>`;

      activities.forEach(activity => {
        const uniqueId = `${day}-${activity}-1`;

        const activityContainer = document.createElement('div');
        activityContainer.classList.add('activity-container');
        activityContainer.setAttribute('data-activity', activity);

        const timeField = createTimePicker(activity, day, uniqueId);

        if (activity === "School") {
  const schoolContainer = document.createElement('div');
  schoolContainer.classList.add('school-container');

  schoolContainer.appendChild(timeField);

  const addButtonContainer = document.createElement('div');
  addButtonContainer.classList.add('add-button-container');

  const addButton = document.createElement('button');
  addButton.type = 'button';
  addButton.classList.add('mdc-button', 'mdc-button--outlined', 'addSchool');

  // Add a span for the label
  const labelSpan = document.createElement('span');
  labelSpan.classList.add('button-label');
  labelSpan.innerHTML = '+';

  addButton.appendChild(labelSpan);
  addButton.onclick = () => addAdditionalTime(schoolContainer, addButtonContainer, day);

  addButtonContainer.appendChild(addButton);

  schoolContainer.appendChild(addButtonContainer);
  activityContainer.appendChild(schoolContainer);

  // Add spinning animation CSS
  const style = document.createElement('style');
  style.innerHTML = `
    .add-button-container .mdc-button .button-label {
      display: inline-block;
      font-size:22px;
      transition: transform 0.5s ease-out;
    }

    .add-button-container .mdc-button:hover .button-label {
      animation: spin 0.2s linear forwards;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  `;
  document.head.appendChild(style);
} else {
  activityContainer.appendChild(timeField);
}


        daySection.appendChild(activityContainer);
      });

      return daySection;
    }

    function addAdditionalTime(schoolContainer, addButtonContainer, day) {
      const uniqueId = `additional-${Date.now()}`;
      const additionalTimeField = createTimePicker("School", day, uniqueId);
      schoolContainer.insertBefore(additionalTimeField, addButtonContainer);
    }

    daysOfWeek.forEach(day => {
      const daySection = createDaySection(day);
      calendarContainer.appendChild(daySection);
    });

    function updateStep() {
      const steps = document.querySelectorAll('.step');
      steps.forEach((step, index) => {
        step.classList.toggle('active', index === currentStep);
      });

      document.getElementById('backButton').style.display = currentStep === 0 ? 'none' : 'inline';
      document.getElementById('nextButton').style.display = currentStep === steps.length - 1 ? 'none' : 'inline';
      document.getElementById('submitButton').style.display = currentStep === steps.length - 1 ? 'inline' : 'none';
    }

    function nextStep() {
      const steps = document.querySelectorAll('.step');
      if (currentStep < steps.length - 1) {
        currentStep++;
        updateStep();
      }
    }

    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        updateStep();
      }
    }

    function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("Weekly Calendar", 10, 10);

      let yPosition = 20;

      daysOfWeek.forEach(day => {
        doc.setFontSize(14);
        doc.text(day, 10, yPosition);
        yPosition += 10;

        let entries = [];

        activities.forEach(activity => {
          const startElements = document.querySelectorAll(`input[name^="${day}-${activity}-start"]`);
          const endElements = document.querySelectorAll(`input[name^="${day}-${activity}-end"]`);

          startElements.forEach((startElem, index) => {
            const startTime = startElem.value;
            const endTime = endElements[index] ? endElements[index].value : "N/A";

            if (startTime) {
              entries.push({
                activity: activity,
                startTime: startTime,
                endTime: endTime
              });
            }
          });
        });

        entries.sort((a, b) => a.startTime.localeCompare(b.startTime));

        entries.forEach(entry => {
          doc.setFontSize(12);
          doc.text(`${entry.activity}: ${entry.startTime} - ${entry.endTime}`, 20, yPosition);
          yPosition += 10;
        });

        yPosition += 5; // Space between days
      });

      doc.save("Weekly_Calendar.pdf");
    }

    updateStep(); // Initialize the first step
  </script>
</body>
</html>